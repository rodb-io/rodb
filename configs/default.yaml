parsers:
  - integer:
      name: defaultInteger
      ignoreCharacters: ", .â‚¬$"
  - float:
      name: defaultFloat
      decimalSeparator: "."
      ignoreCharacters: ", "
  - boolean:
      name: defaultBoolean
      trueValues: ["true", "1", "yes", "TRUE", "YES"]
      falseValues: ["false", "0", "no", "FALSE", "NO", ""]
  - string:
      name: defaultString
      convertFromCharset: ""
  - json:
      name: defaultJson
  - split:
      name: defaultSplit
      delimiter: "/"
      delimiterIsRegexp: false
      parser: integer
  - split:
      name: defaultSplitRegexp
      delimiter: "[^a-z]"
      delimiterIsRegexp: true
      parser: integer
inputs:
  - csv:
      name: defaultInput
      path: ./dummy.csv
      dieOnInputChange: true
      ignoreFirstRow: true
      delimiter: ","
      columns:
        - name: id
          parser: defaultInteger
        - name: name
          parser: defaultString
        - name: number
          parser: defaultFloat
        - name: bool
          parser: defaultBoolean
  - csv:
      name: defaultInput2
      path: ./dummy2.csv
      dieOnInputChange: true
      ignoreFirstRow: true
      autodetectColumns: true
      delimiter: ","
  - xml:
      name: defaultInput3
      path: ./dummy.xml
      dieOnInputChange: true
      recordXpath: "//item"
      properties:
        - name: id
          parser: defaultInteger
          xpath: "/id"
        - name: name
          parser: defaultString
          xpath: "string(//name)"
        - name: number
          parser: defaultFloat
          xpath: "/number"
        - name: bool
          parser: defaultBoolean
          xpath: "/bool"
        - name: integerArray
          type: array
          xpath: "/*/foo::text()"
          items:
            parser: defaultInteger
        - name: objectArray
          type: array
          xpath: "/bar"
          items:
            type: object
            properties:
              - name: prop_a
                parser: defaultInteger
                xpath: "string(/baz)"
        - name: object
          type: object
          xpath: "/*/foo::text()"
          properties:
            - name: prop_a
              parser: defaultInteger
              xpath: "/*/foo::text()"
indexes:
  - memoryMap:
      name: defaultIndex
      input: defaultInput
      properties:
        - id
        - name
outputs:
  - graphql:
      name: defaultGraphqlOutput
  - jsonArray:
      name: defaultJsonArrayOutput
      input: defaultInput
      limit:
        default: 100
        max: 1000
        parameter: "limit"
      offset:
        parameter: "offset"
      parameters:
        id:
          property: id
          index: defaultIndex
          parser: integer
        name:
          property: name
          index: defaultIndex
          parser: string
      relationships:
        mySubProperty:
          input: defaultInput
          isArray: false
          match:
            - parentProperty: id
              childProperty: id
              childIndex: defaultIndex
  - jsonObject:
      name: defaultJsonObjectOutput
      input: defaultInput
      relationships:
        mySubProperty:
          input: defaultInput
          isArray: false
          match:
            - parentProperty: id
              childProperty: id
              childIndex: defaultIndex
          relationships:
            mySubSubProperty:
              input: defaultInput
              isArray: true
              match:
                - parentProperty: id
                  childProperty: id
                  childIndex: defaultIndex
              sort:
                - property: id
                  ascending: true
      parameters:
        id:
          property: id
          index: defaultIndex
          parser: integer
services:
  - http:
      name: defaultService
      listen: ":80"
      errorsType: application/json
      routes:
        - path: "/dummies"
          output: defaultJsonArrayOutput
        - path: "/dummies/{id}"
          output: defaultJsonObjectOutput
